{"ast":null,"code":"var _jsxFileName = \"/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/home/home.page.jsx\";\nimport React from 'react';\nimport UserService from '../../services/user.service';\nimport CarService from '../../services/car.service';\nimport { User } from '../../models/user';\nimport { Transaction } from '../../models/transaction';\nexport default class HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cars: [],\n      errorMessage: '',\n      infoMessage: '',\n      currentUser: new User()\n    };\n  }\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data\n      });\n    });\n    this.getAllCars();\n  }\n  getAllCars() {\n    this.setState({\n      cars: {\n        loading: true\n      }\n    });\n    CarService.findAllCars().then(cars => {\n      this.setState({\n        cars: cars.data\n      });\n    });\n  }\n  enroll(car) {\n    if (!this.state.currentUser) {\n      this.setState({\n        errorMessage: 'To buy a car, you should sign in.'\n      });\n      return;\n    }\n    var transaction = new Transaction(this.state.currentUser.id, car);\n    CarService.createTransaction(transaction).then(data => {\n      this.setState({\n        infoMessage: 'You enrolled the car successfully.'\n      });\n    }, error => {\n      this.setState({\n        errorMessage: 'Unexpected error occurred.'\n      });\n    });\n  }\n  detail(car) {\n    localStorage.setItem('currentCar', JSON.stringify(car));\n    this.props.history.push('/detail/' + car.id);\n  }\n  render() {\n    const {\n      cars,\n      infoMessage,\n      errorMessage\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, infoMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, \"Successfull! \"), infoMessage, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 15\n      }\n    }, \"\\xD7\"))), errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"Error! \"), errorMessage, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, \"\\xD7\"))), cars.loading && /*#__PURE__*/React.createElement(\"em\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 26\n      }\n    }, \" Loading cars...\"), cars.length && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 50\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        marginBottom: 60\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, \"Welcome to our website! Please choose your favorite car from our list:\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, \"Car Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, \"Type\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, \"Details\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, cars.map((car, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: car.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 19\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 19\n      }\n    }, car.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 19\n      }\n    }, car.type), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 19\n      }\n    }, \"$\", car.price, \"/day\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      onClick: () => this.detail(car),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, \"Detail\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: () => this.enroll(car),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, \"Buy\"))))))));\n  }\n}","map":{"version":3,"names":["React","UserService","CarService","User","Transaction","HomePage","Component","constructor","props","state","cars","errorMessage","infoMessage","currentUser","componentDidMount","subscribe","data","setState","getAllCars","loading","findAllCars","then","enroll","car","transaction","id","createTransaction","error","detail","localStorage","setItem","JSON","stringify","history","push","render","length","marginTop","marginBottom","map","index","name","type","price"],"sources":["/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/home/home.page.jsx"],"sourcesContent":["import React from 'react';\nimport UserService from '../../services/user.service';\nimport CarService from '../../services/car.service';\nimport {User} from '../../models/user';\nimport {Transaction} from '../../models/transaction';\n\nexport default class HomePage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      cars: [],\n      errorMessage: '',\n      infoMessage: '',\n      currentUser: new User()\n    };\n  }\n\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data\n      });\n    });\n\n    this.getAllCars();\n  }\n\n  getAllCars() {\n    this.setState({\n      cars: {loading: true}\n    });\n\n    CarService.findAllCars().then(cars => {\n      this.setState({cars: cars.data});\n    });\n  }\n\n  enroll(car) {\n    if(!this.state.currentUser){\n      this.setState({errorMessage: 'To buy a car, you should sign in.'});\n      return;\n    }\n\n    var transaction = new Transaction(this.state.currentUser.id, car);\n    CarService.createTransaction(transaction).then(data => {\n      this.setState({infoMessage: 'You enrolled the car successfully.'});\n    }, error => {\n      this.setState({errorMessage: 'Unexpected error occurred.'});\n    });\n  }\n\n  detail(car) {\n    localStorage.setItem('currentCar', JSON.stringify(car));\n    this.props.history.push('/detail/' + car.id);\n  }\n\n  render() {\n    const {cars, infoMessage, errorMessage} = this.state;\n    return (\n      <div className=\"col-md-12\">\n        {infoMessage &&\n          <div className=\"alert alert-success\">\n            <strong>Successfull! </strong>{infoMessage}\n            <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n        }\n        {errorMessage &&\n          <div className=\"alert alert-danger\">\n            <strong>Error! </strong>{errorMessage}\n            <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n        }\n        {cars.loading && <em> Loading cars...</em>}\n        {cars.length &&\n        <div style={{marginTop: 50}}>\n          <h2 style={{marginBottom: 60}}>Welcome to our website! Please choose your favorite car from our list:</h2>\n          <table className=\"table table-striped\">\n            <thead>\n              <tr> \n                <th scope=\"col\">#</th>\n                <th scope=\"col\">Car Name</th>\n                <th scope=\"col\">Type</th>\n                <th scope=\"col\">Price</th>\n                <th scope=\"col\">Details</th>\n                <th scope=\"col\">Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              {cars.map((car, index) =>\n                <tr key={car.id}>\n                  <th scope=\"row\">{index + 1}</th>\n                  <td>{car.name}</td>\n                  <td>{car.type}</td>\n                  <td>${car.price}/day</td>\n                  <td>\n                    <button className=\"btn btn-info\" onClick={()=>this.detail(car)}>Detail</button>\n                  </td>\n                  <td>\n                    <button className=\"btn btn-success\" onClick={()=>this.enroll(car)}>Buy</button>\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n          </div>\n        }\n      </div>\n    );\n  }\n  \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}