{"ast":null,"code":"var _jsxFileName = \"/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/home/home.page.jsx\";\nimport React from 'react';\nimport UserService from '../../services/user.service';\nimport { User } from '../../models/user';\nimport BookService from \"../../services/book.service\";\nexport default class HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      errorMessage: '',\n      infoMessage: '',\n      currentUser: new User()\n    };\n  }\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data\n      });\n    });\n    this.getAllBooks();\n  }\n  getAllBooks() {\n    this.setState({\n      books: {\n        loading: true\n      }\n    });\n    BookService.findAllBooks().then(books => {\n      this.setState({\n        books: books.data\n      });\n    });\n  }\n  buy(book) {\n    if (!this.state.currentUser) {\n      this.setState({\n        errorMessage: 'To buy a book, you should sign in.'\n      });\n      return;\n    }\n    localStorage.setItem('currentBook', JSON.stringify(book));\n    this.props.history.push('/payment/' + book.id);\n  }\n  detail(book) {\n    localStorage.setItem('currentBook', JSON.stringify(book));\n    this.props.history.push('/detail/' + book.id);\n  }\n  render() {\n    const {\n      books,\n      infoMessage,\n      errorMessage\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, infoMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 25\n      }\n    }, \"Successfull! \"), infoMessage, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 29\n      }\n    }, \"\\xD7\"))), errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, \"Error! \"), errorMessage, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 29\n      }\n    }, \"\\xD7\"))), books.loading && /*#__PURE__*/React.createElement(\"em\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 35\n      }\n    }, \" Loading books...\"), books.length && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 50\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        marginBottom: 60\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }, \"Welcome to our website! Please choose your desired book from our list:\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 33\n      }\n    }, \"Book Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 33\n      }\n    }, \"Author\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 33\n      }\n    }, \"Genre\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 33\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 33\n      }\n    }, \"Details\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 33\n      }\n    }, \"Discount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 29\n      }\n    }, books.map((book, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: book.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 37\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 37\n      }\n    }, book.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 37\n      }\n    }, book.author), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 37\n      }\n    }, book.genre), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 37\n      }\n    }, \"$\", book.price), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      onClick: () => this.detail(book),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 41\n      }\n    }, \"Detail\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: () => this.buy(book),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 41\n      }\n    }, \"Buy\"))))))));\n  }\n}","map":{"version":3,"names":["React","UserService","User","BookService","HomePage","Component","constructor","props","state","books","errorMessage","infoMessage","currentUser","componentDidMount","subscribe","data","setState","getAllBooks","loading","findAllBooks","then","buy","book","localStorage","setItem","JSON","stringify","history","push","id","detail","render","length","marginTop","marginBottom","map","index","name","author","genre","price"],"sources":["/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/home/home.page.jsx"],"sourcesContent":["import React from 'react';\nimport UserService from '../../services/user.service';\nimport {User} from '../../models/user';\nimport BookService from \"../../services/book.service\";\n\nexport default class HomePage extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            books: [],\n            errorMessage: '',\n            infoMessage: '',\n            currentUser: new User()\n        };\n    }\n\n    componentDidMount() {\n        UserService.currentUser.subscribe(data => {\n            this.setState({\n                currentUser: data\n            });\n        });\n\n        this.getAllBooks();\n    }\n\n    getAllBooks() {\n        this.setState({\n            books: {loading: true}\n        });\n\n        BookService.findAllBooks().then(books => {\n            this.setState({books: books.data});\n        });\n    }\n\n    buy(book) {\n        if (!this.state.currentUser) {\n            this.setState({errorMessage: 'To buy a book, you should sign in.'});\n            return;\n        }\n\n        localStorage.setItem('currentBook', JSON.stringify(book));\n        this.props.history.push('/payment/' + book.id);\n    }\n\n    detail(book) {\n        localStorage.setItem('currentBook', JSON.stringify(book));\n        this.props.history.push('/detail/' + book.id);\n    }\n\n    render() {\n        const {books, infoMessage, errorMessage} = this.state;\n        return (\n            <div className=\"col-md-12\">\n                {infoMessage &&\n                    <div className=\"alert alert-success\">\n                        <strong>Successfull! </strong>{infoMessage}\n                        <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                }\n                {errorMessage &&\n                    <div className=\"alert alert-danger\">\n                        <strong>Error! </strong>{errorMessage}\n                        <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                }\n                {books.loading && <em> Loading books...</em>}\n                {books.length &&\n                    <div style={{marginTop: 50}}>\n                        <h2 style={{marginBottom: 60}}>Welcome to our website! Please choose your desired book from\n                            our list:</h2>\n                        <table className=\"table table-striped\">\n                            <thead>\n                            <tr>\n                                <th scope=\"col\">#</th>\n                                <th scope=\"col\">Book Name</th>\n                                <th scope=\"col\">Author</th>\n                                <th scope=\"col\">Genre</th>\n                                <th scope=\"col\">Price</th>\n                                <th scope=\"col\">Details</th>\n                                <th scope=\"col\">Discount</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            {books.map((book, index) =>\n                                <tr key={book.id}>\n                                    <th scope=\"row\">{index + 1}</th>\n                                    <td>{book.name}</td>\n                                    <td>{book.author}</td>\n                                    <td>{book.genre}</td>\n                                    <td>${book.price}</td>\n                                    <td>\n                                        <button className=\"btn btn-info\" onClick={() => this.detail(book)}>Detail\n                                        </button>\n                                    </td>\n                                    <td>\n                                        <button className=\"btn btn-success\" onClick={() => this.buy(book)}>Buy\n                                        </button>\n                                    </td>\n                                </tr>\n                            )}\n                            </tbody>\n                        </table>\n                    </div>\n                }\n            </div>\n        );\n    }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}