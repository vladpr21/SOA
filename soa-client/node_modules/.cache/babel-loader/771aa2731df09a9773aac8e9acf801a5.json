{"ast":null,"code":"var _jsxFileName = \"/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/payment/card-payment.page.jsx\";\nimport React from 'react';\nimport { render } from 'react-dom';\nimport Card from 'react-credit-cards';\nimport './card-payment.page.css';\nimport { useParams } from \"react-router-dom\";\nimport { formatCreditCardNumber, formatCVC, formatExpirationDate } from './utils';\nimport 'react-credit-cards/es/styles-compiled.css';\nimport { Order } from \"../../models/order\";\nimport ProductService from \"../../services/product.service\";\nimport UserService from \"../../services/user.service\";\nexport default class CardPaymentPage extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      number: '',\n      name: '',\n      expiry: '',\n      cvc: '',\n      issuer: '',\n      focused: '',\n      formData: null\n    };\n    this.handleCallback = (_ref, isValid) => {\n      let {\n        issuer\n      } = _ref;\n      if (isValid) {\n        this.setState({\n          issuer\n        });\n      }\n    };\n    this.handleInputFocus = _ref2 => {\n      let {\n        target\n      } = _ref2;\n      this.setState({\n        focused: target.name\n      });\n    };\n    this.handleInputChange = _ref3 => {\n      let {\n        target\n      } = _ref3;\n      if (target.name === 'number') {\n        target.value = formatCreditCardNumber(target.value);\n      } else if (target.name === 'expiry') {\n        target.value = formatExpirationDate(target.value);\n      } else if (target.name === 'cvc') {\n        target.value = formatCVC(target.value);\n      }\n      this.setState({\n        [target.name]: target.value\n      });\n    };\n    this.handleSubmit = e => {\n      e.preventDefault();\n      alert('You have finished payment!');\n      this.form.reset();\n      const params = useParams();\n      console.log(params);\n      var order = new Order(UserService.currentUserValue, ProductService.findProductById(params.productId));\n      ProductService.createOrder(order).then(data => {\n        this.setState({\n          infoMessage: 'You bought the product successfully.'\n        });\n      }, error => {\n        this.setState({\n          errorMessage: 'Unexpected error occurred.'\n        });\n      });\n    };\n  }\n  render() {\n    const {\n      name,\n      number,\n      expiry,\n      cvc,\n      focused,\n      issuer\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"Payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }, \"Enter your payment details\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, \"please input your information below\"), /*#__PURE__*/React.createElement(Card, {\n      number: number,\n      name: name,\n      expiry: expiry,\n      cvc: cvc,\n      focused: focused,\n      callback: this.handleCallback,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      ref: c => this.form = c,\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    }, \"Name on card:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      className: \"form-control\",\n      placeholder: \"Name\",\n      pattern: \"[a-z A-Z-]+\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 29\n      }\n    }, \"Card Number:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"number\",\n      className: \"form-control\",\n      placeholder: \"Card Number\",\n      pattern: \"[\\\\d| ]{16,22}\",\n      maxLength: \"19\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 29\n      }\n    }, \"Expiration Date:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"expiry\",\n      className: \"form-control\",\n      placeholder: \"Valid Thru\",\n      pattern: \"\\\\d\\\\d/\\\\d\\\\d\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, \"CVC:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"cvc\",\n      className: \"form-control\",\n      placeholder: \"CVC\",\n      pattern: \"\\\\d{3}\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      name: \"issuer\",\n      value: issuer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    }, \"Submit\")))));\n  }\n}\nrender( /*#__PURE__*/React.createElement(CardPaymentPage, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 8\n  }\n}), document.getElementById('root'));","map":{"version":3,"names":["React","render","Card","useParams","formatCreditCardNumber","formatCVC","formatExpirationDate","Order","ProductService","UserService","CardPaymentPage","Component","state","number","name","expiry","cvc","issuer","focused","formData","handleCallback","isValid","setState","handleInputFocus","target","handleInputChange","value","handleSubmit","e","preventDefault","alert","form","reset","params","console","log","order","currentUserValue","findProductById","productId","createOrder","then","data","infoMessage","error","errorMessage","c","document","getElementById"],"sources":["/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/payment/card-payment.page.jsx"],"sourcesContent":["import React from 'react'\nimport { render } from 'react-dom'\nimport Card from 'react-credit-cards'\nimport './card-payment.page.css'\nimport { useParams } from \"react-router-dom\"\n\nimport {\n    formatCreditCardNumber,\n    formatCVC,\n    formatExpirationDate\n} from './utils'\n\nimport 'react-credit-cards/es/styles-compiled.css'\nimport {Order} from \"../../models/order\";\nimport ProductService from \"../../services/product.service\";\nimport UserService from \"../../services/user.service\";\n\nexport default class CardPaymentPage extends React.Component {\n    state = {\n        number: '',\n        name: '',\n        expiry: '',\n        cvc: '',\n        issuer: '',\n        focused: '',\n        formData: null\n    }\n\n    handleCallback = ({ issuer }, isValid) => {\n        if (isValid) {\n            this.setState({ issuer })\n        }\n    }\n\n    handleInputFocus = ({ target }) => {\n        this.setState({\n            focused: target.name\n        })\n    }\n\n    handleInputChange = ({ target }) => {\n        if (target.name === 'number') {\n            target.value = formatCreditCardNumber(target.value)\n        } else if (target.name === 'expiry') {\n            target.value = formatExpirationDate(target.value)\n        } else if (target.name === 'cvc') {\n            target.value = formatCVC(target.value)\n        }\n\n        this.setState({ [target.name]: target.value })\n    }\n\n    handleSubmit = e => {\n        e.preventDefault()\n        alert('You have finished payment!')\n        this.form.reset()\n        const params = useParams();\n        console.log(params)\n        var order = new Order(UserService.currentUserValue, ProductService.findProductById(params.productId));\n        ProductService.createOrder(order).then(data => {\n            this.setState({infoMessage: 'You bought the product successfully.'});\n        }, error => {\n            this.setState({errorMessage: 'Unexpected error occurred.'});\n        });\n    }\n\n    render () {\n        const { name, number, expiry, cvc, focused, issuer } = this.state\n\n        return (\n            <div key='Payment'>\n                <div className='App-payment'>\n                    <h1>Enter your payment details</h1>\n                    <h4>please input your information below</h4>\n                    <Card\n                        number={number}\n                        name={name}\n                        expiry={expiry}\n                        cvc={cvc}\n                        focused={focused}\n                        callback={this.handleCallback}\n                    />\n                    <form ref={c => (this.form = c)} onSubmit={this.handleSubmit}>\n                        <div className='form-group'>\n                            <small>Name on card:</small>\n\n                            <input\n                                type='text'\n                                name='name'\n                                className='form-control'\n                                placeholder='Name'\n                                pattern='[a-z A-Z-]+'\n                                required\n                                onChange={this.handleInputChange}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n                        <div className='form-group'>\n                            <small>Card Number:</small>\n\n                            <input\n                                type='tel'\n                                name='number'\n                                className='form-control'\n                                placeholder='Card Number'\n                                pattern='[\\d| ]{16,22}'\n                                maxLength='19'\n                                required\n                                onChange={this.handleInputChange}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n\n                        <div className='form-group'>\n                            <small>Expiration Date:</small>\n\n                            <input\n                                type='tel'\n                                name='expiry'\n                                className='form-control'\n                                placeholder='Valid Thru'\n                                pattern='\\d\\d/\\d\\d'\n                                required\n                                onChange={this.handleInputChange}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n                        <div className='form-group'>\n                            <small>CVC:</small>\n\n                            <input\n                                type='tel'\n                                name='cvc'\n                                className='form-control'\n                                placeholder='CVC'\n                                pattern='\\d{3}'\n                                required\n                                onChange={this.handleInputChange}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n                        <input type='hidden' name='issuer' value={issuer} />\n                        <div className='form-actions'>\n                            <button>Submit</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nrender(<CardPaymentPage />, document.getElementById('root'))\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}