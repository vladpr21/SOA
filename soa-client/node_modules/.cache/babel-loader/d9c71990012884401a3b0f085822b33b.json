{"ast":null,"code":"var _jsxFileName = \"/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/home/home.page.jsx\";\nimport React from 'react';\nimport UserService from '../../services/user.service';\nimport ProductService from '../../services/product.service';\nimport { User } from '../../models/user';\nimport { Order } from '../../models/order';\nexport default class HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      errorMessage: '',\n      infoMessage: '',\n      currentUser: new User()\n    };\n  }\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data\n      });\n    });\n    this.getAllProducts();\n  }\n  getAllProducts() {\n    this.setState({\n      products: {\n        loading: true\n      }\n    });\n    ProductService.findAllProducts().then(products => {\n      this.setState({\n        products: products.data\n      });\n    });\n  }\n  enroll(product) {\n    if (!this.state.currentUser) {\n      this.setState({\n        errorMessage: 'To buy a product, you should sign in.'\n      });\n      return;\n    }\n    var order = new Order(this.state.currentUser.id, product);\n    ProductService.createOrder(order).then(data => {\n      this.setState({\n        infoMessage: 'You bought the product successfully.'\n      });\n    }, error => {\n      this.setState({\n        errorMessage: 'Unexpected error occurred.'\n      });\n    });\n  }\n  detail(product) {\n    localStorage.setItem('currentProduct', JSON.stringify(product));\n    this.props.history.push('/detail/' + product.id);\n  }\n  render() {\n    const {\n      products,\n      infoMessage,\n      errorMessage\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, infoMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }\n    }, \"Successfull! \"), infoMessage, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 29\n      }\n    }, \"\\xD7\"))), errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, \"Error! \"), errorMessage, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 29\n      }\n    }, \"\\xD7\"))), products.loading && /*#__PURE__*/React.createElement(\"em\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 38\n      }\n    }, \" Loading products...\"), products.length && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 50\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        marginBottom: 60\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, \"Welcome to our website! Please choose your desired product from our list:\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 33\n      }\n    }, \"Product Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 33\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 33\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 33\n      }\n    }, \"Details\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 33\n      }\n    }, \"Discount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 29\n      }\n    }, products.map((product, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: product.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 37\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 37\n      }\n    }, product.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 37\n      }\n    }, product.category), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 37\n      }\n    }, \"$\", product.price), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      onClick: () => this.detail(product),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 41\n      }\n    }, \"Detail\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: () => this.enroll(product),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 41\n      }\n    }, \"Buy\"))))))));\n  }\n}","map":{"version":3,"names":["React","UserService","ProductService","User","Order","HomePage","Component","constructor","props","state","products","errorMessage","infoMessage","currentUser","componentDidMount","subscribe","data","setState","getAllProducts","loading","findAllProducts","then","enroll","product","order","id","createOrder","error","detail","localStorage","setItem","JSON","stringify","history","push","render","length","marginTop","marginBottom","map","index","name","category","price"],"sources":["/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/home/home.page.jsx"],"sourcesContent":["import React from 'react';\nimport UserService from '../../services/user.service';\nimport ProductService from '../../services/product.service';\nimport {User} from '../../models/user';\nimport {Order} from '../../models/order';\n\nexport default class HomePage extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            products: [],\n            errorMessage: '',\n            infoMessage: '',\n            currentUser: new User()\n        };\n    }\n\n    componentDidMount() {\n        UserService.currentUser.subscribe(data => {\n            this.setState({\n                currentUser: data\n            });\n        });\n\n        this.getAllProducts();\n    }\n\n    getAllProducts() {\n        this.setState({\n            products: {loading: true}\n        });\n\n        ProductService.findAllProducts().then(products => {\n            this.setState({products: products.data});\n        });\n    }\n\n    enroll(product) {\n        if (!this.state.currentUser) {\n            this.setState({errorMessage: 'To buy a product, you should sign in.'});\n            return;\n        }\n\n        var order = new Order(this.state.currentUser.id, product);\n        ProductService.createOrder(order).then(data => {\n            this.setState({infoMessage: 'You bought the product successfully.'});\n        }, error => {\n            this.setState({errorMessage: 'Unexpected error occurred.'});\n        });\n    }\n\n    detail(product) {\n        localStorage.setItem('currentProduct', JSON.stringify(product));\n        this.props.history.push('/detail/' + product.id);\n    }\n\n    render() {\n        const {products, infoMessage, errorMessage} = this.state;\n        return (\n            <div className=\"col-md-12\">\n                {infoMessage &&\n                    <div className=\"alert alert-success\">\n                        <strong>Successfull! </strong>{infoMessage}\n                        <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                }\n                {errorMessage &&\n                    <div className=\"alert alert-danger\">\n                        <strong>Error! </strong>{errorMessage}\n                        <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                }\n                {products.loading && <em> Loading products...</em>}\n                {products.length &&\n                    <div style={{marginTop: 50}}>\n                        <h2 style={{marginBottom: 60}}>Welcome to our website! Please choose your desired product from\n                            our list:</h2>\n                        <table className=\"table table-striped\">\n                            <thead>\n                            <tr>\n                                <th scope=\"col\">#</th>\n                                <th scope=\"col\">Product Name</th>\n                                <th scope=\"col\">Category</th>\n                                <th scope=\"col\">Price</th>\n                                <th scope=\"col\">Details</th>\n                                <th scope=\"col\">Discount</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            {products.map((product, index) =>\n                                <tr key={product.id}>\n                                    <th scope=\"row\">{index + 1}</th>\n                                    <td>{product.name}</td>\n                                    <td>{product.category}</td>\n                                    <td>${product.price}</td>\n                                    <td>\n                                        <button className=\"btn btn-info\" onClick={() => this.detail(product)}>Detail\n                                        </button>\n                                    </td>\n                                    <td>\n                                        <button className=\"btn btn-success\" onClick={() => this.enroll(product)}>Buy\n                                        </button>\n                                    </td>\n                                </tr>\n                            )}\n                            </tbody>\n                        </table>\n                    </div>\n                }\n            </div>\n        );\n    }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}