{"ast":null,"code":"var _jsxFileName = \"/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/payment/card-payment.page.jsx\";\nimport React from 'react';\nimport { render } from 'react-dom';\nimport Card from 'react-credit-cards';\nimport './card-payment.page.css';\nimport { useParams } from \"react-router-dom\";\nimport { formatCreditCardNumber, formatCVC, formatExpirationDate } from './utils';\nimport 'react-credit-cards/es/styles-compiled.css';\nimport { Order } from \"../../models/order\";\nimport ProductService from \"../../services/book.service\";\nimport UserService from \"../../services/user.service\";\nexport default class CardPaymentPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleCallback = (_ref, isValid) => {\n      let {\n        issuer\n      } = _ref;\n      if (isValid) {\n        this.setState({\n          issuer\n        });\n      }\n    };\n    this.handleInputFocus = _ref2 => {\n      let {\n        target\n      } = _ref2;\n      this.setState({\n        focused: target.name\n      });\n    };\n    this.handleInputChange = _ref3 => {\n      let {\n        target\n      } = _ref3;\n      if (target.name === 'number') {\n        target.value = formatCreditCardNumber(target.value);\n      } else if (target.name === 'expiry') {\n        target.value = formatExpirationDate(target.value);\n      } else if (target.name === 'cvc') {\n        target.value = formatCVC(target.value);\n      }\n      this.setState({\n        [target.name]: target.value\n      });\n    };\n    this.handleSubmit = e => {\n      e.preventDefault();\n      alert('You have finished payment!');\n      this.form.reset();\n      const id = this.state.props.history.location.pathname.substr(9, 1);\n      ProductService.findBookById(id).then(product => {\n        var order = new Order(UserService.currentUserValue.id, product.data);\n        ProductService.createOrder(order).then(data => {\n          this.setState({\n            infoMessage: 'You bought the product successfully.'\n          });\n          this.props.history.push('/profile');\n        }, error => {\n          this.setState({\n            errorMessage: 'Unexpected error occurred.'\n          });\n        });\n      });\n    };\n    this.state = {\n      number: '',\n      name: '',\n      expiry: '',\n      cvc: '',\n      issuer: '',\n      focused: '',\n      formData: null,\n      props: props\n    };\n  }\n  render() {\n    const {\n      name,\n      number,\n      expiry,\n      cvc,\n      focused,\n      issuer\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"Payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }\n    }, \"Enter your payment details\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, \"please input your information below\"), /*#__PURE__*/React.createElement(Card, {\n      number: number,\n      name: name,\n      expiry: expiry,\n      cvc: cvc,\n      focused: focused,\n      callback: this.handleCallback,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      ref: c => this.form = c,\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    }, \"Name on card:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      className: \"form-control\",\n      placeholder: \"Name\",\n      pattern: \"[a-z A-Z-]+\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 29\n      }\n    }, \"Card Number:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"number\",\n      className: \"form-control\",\n      placeholder: \"Card Number\",\n      pattern: \"[\\\\d| ]{16,22}\",\n      maxLength: \"19\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 29\n      }\n    }, \"Expiration Date:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"expiry\",\n      className: \"form-control\",\n      placeholder: \"Valid Thru\",\n      pattern: \"\\\\d\\\\d/\\\\d\\\\d\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 29\n      }\n    }, \"CVC:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"cvc\",\n      className: \"form-control\",\n      placeholder: \"CVC\",\n      pattern: \"\\\\d{3}\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      name: \"issuer\",\n      value: issuer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, \"Submit\")))));\n  }\n}\nrender( /*#__PURE__*/React.createElement(CardPaymentPage, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 8\n  }\n}), document.getElementById('root'));","map":{"version":3,"names":["React","render","Card","useParams","formatCreditCardNumber","formatCVC","formatExpirationDate","Order","ProductService","UserService","CardPaymentPage","Component","constructor","props","handleCallback","isValid","issuer","setState","handleInputFocus","target","focused","name","handleInputChange","value","handleSubmit","e","preventDefault","alert","form","reset","id","state","history","location","pathname","substr","findBookById","then","product","order","currentUserValue","data","createOrder","infoMessage","push","error","errorMessage","number","expiry","cvc","formData","c","document","getElementById"],"sources":["/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/payment/card-payment.page.jsx"],"sourcesContent":["import React from 'react'\nimport { render } from 'react-dom'\nimport Card from 'react-credit-cards'\nimport './card-payment.page.css'\nimport { useParams } from \"react-router-dom\"\n\nimport {\n    formatCreditCardNumber,\n    formatCVC,\n    formatExpirationDate\n} from './utils'\n\nimport 'react-credit-cards/es/styles-compiled.css'\nimport {Order} from \"../../models/order\";\nimport ProductService from \"../../services/book.service\";\nimport UserService from \"../../services/user.service\";\n\nexport default class CardPaymentPage extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            number: '',\n            name: '',\n            expiry: '',\n            cvc: '',\n            issuer: '',\n            focused: '',\n            formData: null,\n            props: props\n        }\n    }\n\n    handleCallback = ({ issuer }, isValid) => {\n        if (isValid) {\n            this.setState({ issuer })\n        }\n    }\n\n    handleInputFocus = ({ target }) => {\n        this.setState({\n            focused: target.name\n        })\n    }\n\n    handleInputChange = ({ target }) => {\n        if (target.name === 'number') {\n            target.value = formatCreditCardNumber(target.value)\n        } else if (target.name === 'expiry') {\n            target.value = formatExpirationDate(target.value)\n        } else if (target.name === 'cvc') {\n            target.value = formatCVC(target.value)\n        }\n\n        this.setState({ [target.name]: target.value })\n    }\n\n    handleSubmit = e => {\n        e.preventDefault()\n        alert('You have finished payment!')\n        this.form.reset()\n        const id = this.state.props.history.location.pathname.substr(9,1)\n        ProductService.findBookById(id).then(product =>{\n            var order = new Order(UserService.currentUserValue.id, product.data);\n            ProductService.createOrder(order).then(data => {\n                this.setState({infoMessage: 'You bought the product successfully.'});\n                this.props.history.push('/profile');\n            }, error => {\n                this.setState({errorMessage: 'Unexpected error occurred.'});\n            });\n        })\n    }\n\n    render () {\n        const { name, number, expiry, cvc, focused, issuer } = this.state\n\n        return (\n            <div key='Payment'>\n                <div className='App-payment'>\n                    <h1>Enter your payment details</h1>\n                    <h4>please input your information below</h4>\n                    <Card\n                        number={number}\n                        name={name}\n                        expiry={expiry}\n                        cvc={cvc}\n                        focused={focused}\n                        callback={this.handleCallback}\n                    />\n                    <form ref={c => (this.form = c)} onSubmit={this.handleSubmit}>\n                        <div className='form-group'>\n                            <small>Name on card:</small>\n\n                            <input\n                                type='text'\n                                name='name'\n                                className='form-control'\n                                placeholder='Name'\n                                pattern='[a-z A-Z-]+'\n                                required\n                                onChange={this.handleInputChange}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n                        <div className='form-group'>\n                            <small>Card Number:</small>\n\n                            <input\n                                type='tel'\n                                name='number'\n                                className='form-control'\n                                placeholder='Card Number'\n                                pattern='[\\d| ]{16,22}'\n                                maxLength='19'\n                                required\n                                onChange={this.handleInputChange}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n\n                        <div className='form-group'>\n                            <small>Expiration Date:</small>\n\n                            <input\n                                type='tel'\n                                name='expiry'\n                                className='form-control'\n                                placeholder='Valid Thru'\n                                pattern='\\d\\d/\\d\\d'\n                                required\n                                onChange={this.handleInputChange}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n                        <div className='form-group'>\n                            <small>CVC:</small>\n\n                            <input\n                                type='tel'\n                                name='cvc'\n                                className='form-control'\n                                placeholder='CVC'\n                                pattern='\\d{3}'\n                                required\n                                onChange={this.handleInputChange}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n                        <input type='hidden' name='issuer' value={issuer} />\n                        <div className='form-actions'>\n                            <button>Submit</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nrender(<CardPaymentPage />, document.getElementById('root'))\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}