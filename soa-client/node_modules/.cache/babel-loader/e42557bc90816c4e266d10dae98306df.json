{"ast":null,"code":"var _jsxFileName = \"/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/home/home.page.jsx\";\nimport React from 'react';\nimport UserService from '../../services/user.service';\nimport ProductService from '../../services/book.service';\nimport { User } from '../../models/user';\nexport default class HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      errorMessage: '',\n      infoMessage: '',\n      currentUser: new User()\n    };\n  }\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data\n      });\n    });\n    this.getAllProducts();\n  }\n  getAllProducts() {\n    this.setState({\n      products: {\n        loading: true\n      }\n    });\n    ProductService.findAllBooks().then(products => {\n      this.setState({\n        products: products.data\n      });\n    });\n  }\n  buy(product) {\n    if (!this.state.currentUser) {\n      this.setState({\n        errorMessage: 'To buy a product, you should sign in.'\n      });\n      return;\n    }\n    localStorage.setItem('currentProduct', JSON.stringify(product));\n    this.props.history.push('/payment/' + product.id);\n  }\n  detail(product) {\n    localStorage.setItem('currentProduct', JSON.stringify(product));\n    this.props.history.push('/detail/' + product.id);\n  }\n  render() {\n    const {\n      products,\n      infoMessage,\n      errorMessage\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, infoMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 25\n      }\n    }, \"Successfull! \"), infoMessage, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 29\n      }\n    }, \"\\xD7\"))), errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, \"Error! \"), errorMessage, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 29\n      }\n    }, \"\\xD7\"))), products.loading && /*#__PURE__*/React.createElement(\"em\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 38\n      }\n    }, \" Loading products...\"), products.length && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 50\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        marginBottom: 60\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }, \"Welcome to our website! Please choose your desired product from our list:\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 33\n      }\n    }, \"Product Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 33\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 33\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 33\n      }\n    }, \"Details\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 33\n      }\n    }, \"Discount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 29\n      }\n    }, products.map((product, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: product.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 37\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 37\n      }\n    }, product.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 37\n      }\n    }, product.category), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 37\n      }\n    }, \"$\", product.price), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      onClick: () => this.detail(product),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 41\n      }\n    }, \"Detail\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: () => this.buy(product),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 41\n      }\n    }, \"Buy\"))))))));\n  }\n}","map":{"version":3,"names":["React","UserService","ProductService","User","HomePage","Component","constructor","props","state","products","errorMessage","infoMessage","currentUser","componentDidMount","subscribe","data","setState","getAllProducts","loading","findAllBooks","then","buy","product","localStorage","setItem","JSON","stringify","history","push","id","detail","render","length","marginTop","marginBottom","map","index","name","category","price"],"sources":["/Users/vladprundus/Documents/soa/project/Service-Oriented-Architecture/soa-client/src/pages/home/home.page.jsx"],"sourcesContent":["import React from 'react';\nimport UserService from '../../services/user.service';\nimport ProductService from '../../services/book.service';\nimport {User} from '../../models/user';\n\nexport default class HomePage extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            products: [],\n            errorMessage: '',\n            infoMessage: '',\n            currentUser: new User()\n        };\n    }\n\n    componentDidMount() {\n        UserService.currentUser.subscribe(data => {\n            this.setState({\n                currentUser: data\n            });\n        });\n\n        this.getAllProducts();\n    }\n\n    getAllProducts() {\n        this.setState({\n            products: {loading: true}\n        });\n\n        ProductService.findAllBooks().then(products => {\n            this.setState({products: products.data});\n        });\n    }\n\n    buy(product) {\n        if (!this.state.currentUser) {\n            this.setState({errorMessage: 'To buy a product, you should sign in.'});\n            return;\n        }\n\n        localStorage.setItem('currentProduct', JSON.stringify(product));\n        this.props.history.push('/payment/' + product.id);\n    }\n\n    detail(product) {\n        localStorage.setItem('currentProduct', JSON.stringify(product));\n        this.props.history.push('/detail/' + product.id);\n    }\n\n    render() {\n        const {products, infoMessage, errorMessage} = this.state;\n        return (\n            <div className=\"col-md-12\">\n                {infoMessage &&\n                    <div className=\"alert alert-success\">\n                        <strong>Successfull! </strong>{infoMessage}\n                        <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                }\n                {errorMessage &&\n                    <div className=\"alert alert-danger\">\n                        <strong>Error! </strong>{errorMessage}\n                        <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                }\n                {products.loading && <em> Loading products...</em>}\n                {products.length &&\n                    <div style={{marginTop: 50}}>\n                        <h2 style={{marginBottom: 60}}>Welcome to our website! Please choose your desired product from\n                            our list:</h2>\n                        <table className=\"table table-striped\">\n                            <thead>\n                            <tr>\n                                <th scope=\"col\">#</th>\n                                <th scope=\"col\">Product Name</th>\n                                <th scope=\"col\">Category</th>\n                                <th scope=\"col\">Price</th>\n                                <th scope=\"col\">Details</th>\n                                <th scope=\"col\">Discount</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            {products.map((product, index) =>\n                                <tr key={product.id}>\n                                    <th scope=\"row\">{index + 1}</th>\n                                    <td>{product.name}</td>\n                                    <td>{product.category}</td>\n                                    <td>${product.price}</td>\n                                    <td>\n                                        <button className=\"btn btn-info\" onClick={() => this.detail(product)}>Detail\n                                        </button>\n                                    </td>\n                                    <td>\n                                        <button className=\"btn btn-success\" onClick={() => this.buy(product)}>Buy\n                                        </button>\n                                    </td>\n                                </tr>\n                            )}\n                            </tbody>\n                        </table>\n                    </div>\n                }\n            </div>\n        );\n    }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}